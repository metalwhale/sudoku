(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{336:function(t,e,n){var content=n(474);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(129).default)("1b7833da",content,!0,{sourceMap:!1})},342:function(t,e){},344:function(t,e){},354:function(t,e){},356:function(t,e){},381:function(t,e){},382:function(t,e){},387:function(t,e){},389:function(t,e){},396:function(t,e){},415:function(t,e){},473:function(t,e,n){"use strict";n(336)},474:function(t,e,n){var r=n(128)(!1);r.push([t.i,".container{text-align:center}video{display:none}",""]),t.exports=r},479:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(58),n(16),n(56),n(2)),c=n(271),f=n.n(c),h=n(431),l=n(228),d=n(477),v=n(162),w=n(161);n(432),n(434),n(439),n(441),n(442),n(443),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(469),n(47),n(59),n(36),n(470);function m(t,e){var n=new f.a.Mat(t);f.a.cvtColor(n,n,f.a.COLOR_RGBA2GRAY),f.a.adaptiveThreshold(n,n,255,f.a.ADAPTIVE_THRESH_GAUSSIAN_C,f.a.THRESH_BINARY,11,10);var r,o=new f.a.MatVector,c=new f.a.Mat;f.a.findContours(n,o,c,f.a.RETR_CCOMP,f.a.CHAIN_APPROX_SIMPLE),c.delete();for(var h=0,i=0;i<o.size();i++){var l=new f.a.Mat;f.a.approxPolyDP(o.get(i),l,10,!0);var d=S.fromContour(l);if(void 0!==d){var area=f.a.contourArea(l);h<area&&(r=d,h=area)}l.delete()}o.delete();var v=n.cols*n.rows,w=void 0;return void 0!==r&&h>.35*v&&(C(n,r,e,S.fromSize(e.cols,e.rows)),w=r),n.delete(),w}function x(t,e,n){for(var r=new Float32Array(t.cols*t.rows),i=0,o=0;o<t.rows;o+=n)for(var c=0;c<t.cols;c+=e){for(var f=new Float32Array(e*n),h=0;h<n;h++)for(var l=0;l<e;l++)f[h*n+l]=t.data[(o+h)*t.rows+(c+l)]/255;r.set(f,i++*f.length)}return r}function y(t,e){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,o,c,f,i,output;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.predict_one(e);case 2:for(r=t.sent.data,o=e.shape[0],c=r.length/o,f=[],i=0;i<o;i++)output=r.slice(i*c,(i+1)*c),f.push(output.indexOf(Math.max.apply(Math,Object(d.a)(output))));return t.abrupt("return",f);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t,e,n){var r=f.a.Mat.zeros(400,400,f.a.CV_8UC4);r.setTo(new f.a.Scalar(1,1,1,1));for(var o=r.rows/n.length,i=0;i<n.length;i++)for(var c=n[i],h=0;h<c.length;h++){var l=c[h],d=r.cols/c.length,v=new f.a.Point(h*d+15,(i+1)*o-10);f.a.putText(r,"".concat(0==l?"":l),v,f.a.FONT_HERSHEY_SIMPLEX,1,new f.a.Scalar(0,0,1,1),2)}var w=f.a.Mat.ones(t.rows,t.cols,f.a.CV_8UC4);C(r,S.fromSize(r.cols,r.rows),w,e,new f.a.Scalar(1,1,1,1)),r.delete(),f.a.multiply(t,w,t),w.delete()}function _(t,e){var data=new ImageData(new Uint8ClampedArray(t.data),t.cols,t.rows);e.putImageData(data,0,0)}function C(t,e,n,r,o){var c=f.a.matFromArray(4,2,f.a.CV_32F,e.toArray()),h=f.a.matFromArray(4,2,f.a.CV_32F,r.toArray()),l=f.a.getPerspectiveTransform(c,h);c.delete(),h.delete(),f.a.warpPerspective(t,n,l,n.size(),f.a.INTER_LINEAR,f.a.BORDER_CONSTANT,null!=o?o:new f.a.Scalar),l.delete()}var O=function t(e,n){Object(w.a)(this,t),this.x=e,this.y=n},S=function(){function t(e,n,r,o){Object(w.a)(this,t),this.topLeft=e,this.topRight=n,this.bottomLeft=r,this.bottomRight=o}return Object(v.a)(t,[{key:"toArray",value:function(){return[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight].map((function(p){return[p.x,p.y]})).flat()}},{key:"points",get:function(){return[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight]}}],[{key:"fromContour",value:function(e){if(4==e.size().height){for(var data=Array.from(e.data32S),n=[],i=0;i<4;i++)n.push(new O(data[2*i],data[2*i+1]));n.sort((function(t,e){return t.y-e.y}));var r=n[0],o=n[1],c=n[2],f=n[3];if(r.x>o.x){var h=[o,r];r=h[0],o=h[1]}if(c.x>f.x){var l=[f,c];c=l[0],f=l[1]}return new t(r,o,c,f)}}},{key:"fromSize",value:function(e,n){return new t(new O(0,0),new O(e,0),new O(0,n),new O(e,n))}}]),t}(),M=o.a.extend({data:function(){return{width:0,height:0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,video,c,d,v,w,R,C,O,S,M,k,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),o=[],video=t.$refs.video,e.next=5,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 5:return video.srcObject=e.sent,c=video.srcObject.getVideoTracks()[0].getSettings(),d=c.width,v=c.height,t.width=d,t.height=v,w=20,R=9,C=[Math.pow(R,2),w,w,1],e.next=14,h.b("model.onnx",{inputFacts:{0:["float32",C]}});case 14:O=e.sent,(S=document.createElement("canvas")).width=t.width,S.height=t.height,M=S.getContext("2d"),k=t.$refs.canvas.getContext("2d"),E=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var r,c,d,v,S,I,T,i,D,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M.drawImage(video,0,0,t.width,t.height),r=f.a.matFromImageData(M.getImageData(0,0,t.width,t.height)),c=w*R,d=new f.a.Mat(c,c,f.a.CV_8UC3),void 0===(v=m(r,d))||!v.points.every((function(p){return 0!=p.x&&0!=p.y}))){e.next=17;break}if(n=void 0,0!=o.length){e.next=14;break}return S=x(d,w,w),e.next=11,y(new h.a(S,C),O);case 11:if(I=e.sent,void 0!==(T=l.i(I)))for(o=[],i=0;i<T.length/R;i++){for(D=T.slice(i*R,(i+1)*R),F=0;F<D.length;F++)0!=I[i*R+F]&&(D[F]=0);o.push(D)}case 14:A(r,v,o),e.next=18;break;case 17:void 0===n?n=Date.now():Date.now()-n>500&&(o=[]);case 18:_(r,k),r.delete(),d.delete(),requestAnimationFrame(E);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),requestAnimationFrame(E);case 22:case"end":return e.stop()}}),e)})))()}}),k=M,E=(n(473),n(51)),component=Object(E.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("canvas",{ref:"canvas",attrs:{width:t.width,height:t.height}}),t._v(" "),n("video",{ref:"video",attrs:{autoplay:""}})])}),[],!1,null,null,null);e.default=component.exports}}]);